---

title: Extract tests


keywords: fastai
sidebar: home_sidebar

summary: "The functions that grab the cells containing tests (filtering with potential flags) and execute them"
description: "The functions that grab the cells containing tests (filtering with potential flags) and execute them"
nb_path: "nbs/04_test_scala.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/04_test_scala.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Until can build an actual package with chisel-nbdev python code, import my <code>00_export_scala.ipynb</code> -&gt; <code>nbdev/export.py</code> using this hacky method:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Everything that is not an exported cell is considered a test, so you should make sure your notebooks can all run smoothly (and fast) if you want to use this functionality as the CLI. You can mark some cells with special flags (like slow) to make sure they are only executed when you authorize it. Those flags should be configured in your <code>settings.ini</code> (separated by a <code>|</code> if you have several of them). You can also apply flags to one entire notebook by using the <code>all</code> option, e.g. <code>#all_slow</code>, in code cells.</p>
<p>If <code>tst_flags=slow|fastai</code> in <code>settings.ini</code>, you can:</p>
<ul>
<li>mark slow tests with <code>#slow</code> flag</li>
<li>mark tests that depend on fastai with the <code>#fastai</code> flag.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Detect-flags">Detect flags<a class="anchor-link" href="#Detect-flags"> </a></h2><p>The following functions detect the cells that should be excluded from the tests (unless their special flag is passed).</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_all_flags" class="doc_header"><code>get_all_flags</code><a href="https://github.com/ucsc-vama/chisel_nbdevchisel_nbdev/test_scala.py#L53" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_all_flags</code>(<strong><code>cells</code></strong>)</p>
</blockquote>
<p>Check for all test flags in <code>cells</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nb</span> <span class="o">=</span> <span class="n">read_nb</span><span class="p">(</span><span class="s2">&quot;04_test_scala.ipynb&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">get_all_flags</span><span class="p">(</span><span class="n">nb</span><span class="p">[</span><span class="s1">&#39;cells&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="nb">set</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_cell_flags" class="doc_header"><code>get_cell_flags</code><a href="https://github.com/ucsc-vama/chisel_nbdevchisel_nbdev/test_scala.py#L64" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_cell_flags</code>(<strong><code>cell</code></strong>)</p>
</blockquote>
<p>Check for any special test flag in <code>cell</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">get_cell_flags</span><span class="p">({</span><span class="s1">&#39;cell_type&#39;</span><span class="p">:</span> <span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="s2">&quot;//hide</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">}),</span> <span class="p">[])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Testing-a-notebook">Testing a notebook<a class="anchor-link" href="#Testing-a-notebook"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="NoExportPreprocessor" class="doc_header"><code>class</code> <code>NoExportPreprocessor</code><a href="https://github.com/ucsc-vama/chisel_nbdevchisel_nbdev/test_scala.py#L70" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>NoExportPreprocessor</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <code>ExecutePreprocessor</code></p>
</blockquote>
<p>An <code>ExecutePreprocessor</code> that executes cells that don't have a flag in <code>flags</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If there is a mix of different notebook kernels (i.e Scala and Python notebooks), we only want to run the Scala tests.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_nb" class="doc_header"><code>test_nb</code><a href="https://github.com/ucsc-vama/chisel_nbdevchisel_nbdev/test_scala.py#L84" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_nb</code>(<strong><code>fn</code></strong>, <strong><code>flags</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Execute tests in notebook in <code>fn</code> with <code>flags</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="nbdev_test_nbs" class="doc_header"><code>nbdev_test_nbs</code><a href="https://github.com/ucsc-vama/chisel_nbdevchisel_nbdev/test_scala.py#L110" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>nbdev_test_nbs</code>(<strong><code>fname</code></strong>:"A notebook name or glob to convert"=<em><code>None</code></em>, <strong><code>flags</code></strong>:"Space separated list of flags"=<em><code>None</code></em>, <strong><code>n_workers</code></strong>:"Number of workers to use"=<em><code>None</code></em>, <strong><code>verbose</code></strong>:"Print errors along the way"=<em><code>True</code></em>, <strong><code>timing</code></strong>:"Timing each notebook to see the ones are slow"=<em><code>False</code></em>, <strong><code>pause</code></strong>:"Pause time (in secs) between notebooks to avoid race conditions"=<em><code>0.5</code></em>)</p>
</blockquote>
<p>Test in parallel the notebooks matching <code>fname</code>, passing along <code>flags</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># files</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="nbdev_read_nbs" class="doc_header"><code>nbdev_read_nbs</code><a href="https://github.com/ucsc-vama/chisel_nbdevchisel_nbdev/test_scala.py#L139" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>nbdev_read_nbs</code>(<strong><code>fname</code></strong>:"A notebook name or glob to convert"=<em><code>None</code></em>)</p>
</blockquote>
<p>Check all notebooks matching <code>fname</code> can be opened</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nbdev_test_nbs</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[Path(&#39;/Users/jasonvranek/code/notebooks/chisel_nbdev/nbs/ToImport.ipynb&#39;), Path(&#39;/Users/jasonvranek/code/notebooks/chisel_nbdev/nbs/import_chisel_mod.ipynb&#39;), Path(&#39;/Users/jasonvranek/code/notebooks/chisel_nbdev/nbs/import_composed_mod.ipynb&#39;), Path(&#39;/Users/jasonvranek/code/notebooks/chisel_nbdev/nbs/index.ipynb&#39;), Path(&#39;/Users/jasonvranek/code/notebooks/chisel_nbdev/nbs/test.ipynb&#39;)]
testing /Users/jasonvranek/code/notebooks/chisel_nbdev/nbs/ToImport.ipynb
testing /Users/jasonvranek/code/notebooks/chisel_nbdev/nbs/import_chisel_mod.ipynb
Error in /Users/jasonvranek/code/notebooks/chisel_nbdev/nbs/import_chisel_mod.ipynb:
An error occurred while executing the following cell:
------------------
//export
import $file.^.nbdev.ModA, ModA._
------------------

Cannot resolve $file import: /Users/jasonvranek/code/notebooks/chisel_nbdev/nbdev/ModA.sc
: 

testing /Users/jasonvranek/code/notebooks/chisel_nbdev/nbs/import_composed_mod.ipynb
Error in /Users/jasonvranek/code/notebooks/chisel_nbdev/nbs/import_composed_mod.ipynb:
An error occurred while executing the following cell:
------------------
//export
import $file.^.nbdev.ModB, ModB._
------------------

Cannot resolve $file import: /Users/jasonvranek/code/notebooks/chisel_nbdev/nbdev/ModB.sc
: 

testing /Users/jasonvranek/code/notebooks/chisel_nbdev/nbs/index.ipynb
testing /Users/jasonvranek/code/notebooks/chisel_nbdev/nbs/test.ipynb
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">KeyboardInterrupt</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-19-b1c77381ffda&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-red-fg"># nbdev_test_nbs(&#34;test.ipynb&#34;)</span>
<span class="ansi-green-fg">----&gt; 2</span><span class="ansi-red-fg"> </span>nbdev_test_nbs<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-16-3e7a1b620eb4&gt;</span> in <span class="ansi-cyan-fg">nbdev_test_nbs</span><span class="ansi-blue-fg">(fname, flags, n_workers, verbose, timing, pause)</span>
<span class="ansi-green-intense-fg ansi-bold">     18</span>     os<span class="ansi-blue-fg">.</span>chdir<span class="ansi-blue-fg">(</span>Config<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>path<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;nbs_path&#34;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     19</span> <span class="ansi-red-fg">#     results = parallel(_test_one, files, flags=flags, verbose=verbose, n_workers=n_workers, pause=pause)</span>
<span class="ansi-green-fg">---&gt; 20</span><span class="ansi-red-fg">     </span>results <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span>_test_one<span class="ansi-blue-fg">(</span>f<span class="ansi-blue-fg">,</span> flags<span class="ansi-blue-fg">=</span>flags<span class="ansi-blue-fg">,</span> verbose<span class="ansi-blue-fg">=</span>verbose<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> f <span class="ansi-green-fg">in</span> files<span class="ansi-blue-fg">]</span><span class="ansi-red-fg">#todo fix parallel tester</span>
<span class="ansi-green-intense-fg ansi-bold">     21</span>     passed<span class="ansi-blue-fg">,</span>times <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span>r<span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span> <span class="ansi-green-fg">for</span> r <span class="ansi-green-fg">in</span> results<span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">[</span>r<span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">]</span> <span class="ansi-green-fg">for</span> r <span class="ansi-green-fg">in</span> results<span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">     22</span>     <span class="ansi-green-fg">if</span> all<span class="ansi-blue-fg">(</span>passed<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span> print<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;All tests are passing!&#34;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-16-3e7a1b620eb4&gt;</span> in <span class="ansi-cyan-fg">&lt;listcomp&gt;</span><span class="ansi-blue-fg">(.0)</span>
<span class="ansi-green-intense-fg ansi-bold">     18</span>     os<span class="ansi-blue-fg">.</span>chdir<span class="ansi-blue-fg">(</span>Config<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>path<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;nbs_path&#34;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     19</span> <span class="ansi-red-fg">#     results = parallel(_test_one, files, flags=flags, verbose=verbose, n_workers=n_workers, pause=pause)</span>
<span class="ansi-green-fg">---&gt; 20</span><span class="ansi-red-fg">     </span>results <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span>_test_one<span class="ansi-blue-fg">(</span>f<span class="ansi-blue-fg">,</span> flags<span class="ansi-blue-fg">=</span>flags<span class="ansi-blue-fg">,</span> verbose<span class="ansi-blue-fg">=</span>verbose<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> f <span class="ansi-green-fg">in</span> files<span class="ansi-blue-fg">]</span><span class="ansi-red-fg">#todo fix parallel tester</span>
<span class="ansi-green-intense-fg ansi-bold">     21</span>     passed<span class="ansi-blue-fg">,</span>times <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span>r<span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span> <span class="ansi-green-fg">for</span> r <span class="ansi-green-fg">in</span> results<span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">[</span>r<span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">]</span> <span class="ansi-green-fg">for</span> r <span class="ansi-green-fg">in</span> results<span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">     22</span>     <span class="ansi-green-fg">if</span> all<span class="ansi-blue-fg">(</span>passed<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span> print<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;All tests are passing!&#34;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-15-f3b99b2c5eef&gt;</span> in <span class="ansi-cyan-fg">_test_one</span><span class="ansi-blue-fg">(fname, flags, verbose)</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>     start <span class="ansi-blue-fg">=</span> time<span class="ansi-blue-fg">.</span>time<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">----&gt; 6</span><span class="ansi-red-fg">         </span>test_nb<span class="ansi-blue-fg">(</span>fname<span class="ansi-blue-fg">,</span> flags<span class="ansi-blue-fg">=</span>flags<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span>         <span class="ansi-green-fg">return</span> <span class="ansi-green-fg">True</span><span class="ansi-blue-fg">,</span>time<span class="ansi-blue-fg">.</span>time<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">-</span>start
<span class="ansi-green-intense-fg ansi-bold">      8</span>     <span class="ansi-green-fg">except</span> Exception <span class="ansi-green-fg">as</span> e<span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">&lt;ipython-input-14-28122f25158c&gt;</span> in <span class="ansi-cyan-fg">test_nb</span><span class="ansi-blue-fg">(fn, flags)</span>
<span class="ansi-green-intense-fg ansi-bold">     10</span>         ep <span class="ansi-blue-fg">=</span> NoExportPreprocessor<span class="ansi-blue-fg">(</span>flags<span class="ansi-blue-fg">,</span> timeout<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">600</span><span class="ansi-blue-fg">,</span> kernel_name<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;scala&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span>         pnb <span class="ansi-blue-fg">=</span> nbformat<span class="ansi-blue-fg">.</span>from_dict<span class="ansi-blue-fg">(</span>nb<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 12</span><span class="ansi-red-fg">         </span>ep<span class="ansi-blue-fg">.</span>preprocess<span class="ansi-blue-fg">(</span>pnb<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     13</span>     <span class="ansi-green-fg">finally</span><span class="ansi-blue-fg">:</span> os<span class="ansi-blue-fg">.</span>environ<span class="ansi-blue-fg">.</span>pop<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;IN_TEST&#34;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/Code/classes/jlab_3.8/lib/python3.8/site-packages/nbconvert/preprocessors/execute.py</span> in <span class="ansi-cyan-fg">preprocess</span><span class="ansi-blue-fg">(self, nb, resources, km)</span>
<span class="ansi-green-intense-fg ansi-bold">    403</span>         <span class="ansi-green-fg">with</span> self<span class="ansi-blue-fg">.</span>setup_preprocessor<span class="ansi-blue-fg">(</span>nb<span class="ansi-blue-fg">,</span> resources<span class="ansi-blue-fg">,</span> km<span class="ansi-blue-fg">=</span>km<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    404</span>             self<span class="ansi-blue-fg">.</span>log<span class="ansi-blue-fg">.</span>info<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;Executing notebook with kernel: %s&#34;</span> <span class="ansi-blue-fg">%</span> self<span class="ansi-blue-fg">.</span>kernel_name<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 405</span><span class="ansi-red-fg">             </span>nb<span class="ansi-blue-fg">,</span> resources <span class="ansi-blue-fg">=</span> super<span class="ansi-blue-fg">(</span>ExecutePreprocessor<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>preprocess<span class="ansi-blue-fg">(</span>nb<span class="ansi-blue-fg">,</span> resources<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    406</span>             info_msg <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>_wait_for_reply<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>kc<span class="ansi-blue-fg">.</span>kernel_info<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    407</span>             nb<span class="ansi-blue-fg">.</span>metadata<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;language_info&#39;</span><span class="ansi-blue-fg">]</span> <span class="ansi-blue-fg">=</span> info_msg<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;content&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;language_info&#39;</span><span class="ansi-blue-fg">]</span>

<span class="ansi-green-fg">~/Code/classes/jlab_3.8/lib/python3.8/site-packages/nbconvert/preprocessors/base.py</span> in <span class="ansi-cyan-fg">preprocess</span><span class="ansi-blue-fg">(self, nb, resources)</span>
<span class="ansi-green-intense-fg ansi-bold">     67</span>         &#34;&#34;&#34;
<span class="ansi-green-intense-fg ansi-bold">     68</span>         <span class="ansi-green-fg">for</span> index<span class="ansi-blue-fg">,</span> cell <span class="ansi-green-fg">in</span> enumerate<span class="ansi-blue-fg">(</span>nb<span class="ansi-blue-fg">.</span>cells<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 69</span><span class="ansi-red-fg">             </span>nb<span class="ansi-blue-fg">.</span>cells<span class="ansi-blue-fg">[</span>index<span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">,</span> resources <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>preprocess_cell<span class="ansi-blue-fg">(</span>cell<span class="ansi-blue-fg">,</span> resources<span class="ansi-blue-fg">,</span> index<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     70</span>         <span class="ansi-green-fg">return</span> nb<span class="ansi-blue-fg">,</span> resources
<span class="ansi-green-intense-fg ansi-bold">     71</span> 

<span class="ansi-green-fg">&lt;ipython-input-13-306abf9ec327&gt;</span> in <span class="ansi-cyan-fg">preprocess_cell</span><span class="ansi-blue-fg">(self, cell, resources, index)</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span>             <span class="ansi-green-fg">if</span> f <span class="ansi-green-fg">not</span> <span class="ansi-green-fg">in</span> self<span class="ansi-blue-fg">.</span>flags<span class="ansi-blue-fg">:</span> <span class="ansi-green-fg">return</span> cell<span class="ansi-blue-fg">,</span> resources
<span class="ansi-green-intense-fg ansi-bold">     12</span>         <span class="ansi-green-fg">if</span> check_re<span class="ansi-blue-fg">(</span>cell<span class="ansi-blue-fg">,</span> _re_notebook2script<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span> <span class="ansi-green-fg">return</span> cell<span class="ansi-blue-fg">,</span> resources
<span class="ansi-green-fg">---&gt; 13</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>preprocess_cell<span class="ansi-blue-fg">(</span>cell<span class="ansi-blue-fg">,</span> resources<span class="ansi-blue-fg">,</span> index<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/Code/classes/jlab_3.8/lib/python3.8/site-packages/nbconvert/preprocessors/execute.py</span> in <span class="ansi-cyan-fg">preprocess_cell</span><span class="ansi-blue-fg">(self, cell, resources, cell_index, store_history)</span>
<span class="ansi-green-intense-fg ansi-bold">    436</span>             <span class="ansi-green-fg">return</span> cell<span class="ansi-blue-fg">,</span> resources
<span class="ansi-green-intense-fg ansi-bold">    437</span> 
<span class="ansi-green-fg">--&gt; 438</span><span class="ansi-red-fg">         </span>reply<span class="ansi-blue-fg">,</span> outputs <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>run_cell<span class="ansi-blue-fg">(</span>cell<span class="ansi-blue-fg">,</span> cell_index<span class="ansi-blue-fg">,</span> store_history<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    439</span>         <span class="ansi-red-fg"># Backwards compatibility for processes that wrap run_cell</span>
<span class="ansi-green-intense-fg ansi-bold">    440</span>         cell<span class="ansi-blue-fg">.</span>outputs <span class="ansi-blue-fg">=</span> outputs

<span class="ansi-green-fg">~/Code/classes/jlab_3.8/lib/python3.8/site-packages/nbconvert/preprocessors/execute.py</span> in <span class="ansi-cyan-fg">run_cell</span><span class="ansi-blue-fg">(self, cell, cell_index, store_history)</span>
<span class="ansi-green-intense-fg ansi-bold">    587</span>                         <span class="ansi-red-fg"># polling for output.</span>
<span class="ansi-green-intense-fg ansi-bold">    588</span>                         timeout <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>_timeout_with_deadline<span class="ansi-blue-fg">(</span>timeout<span class="ansi-blue-fg">,</span> deadline<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 589</span><span class="ansi-red-fg">                     </span>msg <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>kc<span class="ansi-blue-fg">.</span>iopub_channel<span class="ansi-blue-fg">.</span>get_msg<span class="ansi-blue-fg">(</span>timeout<span class="ansi-blue-fg">=</span>timeout<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    590</span>                 <span class="ansi-green-fg">except</span> Empty<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    591</span>                     <span class="ansi-green-fg">if</span> polling_exec_reply<span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/Code/classes/jlab_3.8/lib/python3.8/site-packages/jupyter_client/blocking/channels.py</span> in <span class="ansi-cyan-fg">get_msg</span><span class="ansi-blue-fg">(self, block, timeout)</span>
<span class="ansi-green-intense-fg ansi-bold">     45</span>             <span class="ansi-green-fg">if</span> timeout <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">not</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     46</span>                 timeout <span class="ansi-blue-fg">*=</span> <span class="ansi-cyan-fg">1000</span>  <span class="ansi-red-fg"># seconds to ms</span>
<span class="ansi-green-fg">---&gt; 47</span><span class="ansi-red-fg">             </span>ready <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>socket<span class="ansi-blue-fg">.</span>poll<span class="ansi-blue-fg">(</span>timeout<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     48</span>         <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     49</span>             ready <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>socket<span class="ansi-blue-fg">.</span>poll<span class="ansi-blue-fg">(</span>timeout<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/Code/classes/jlab_3.8/lib/python3.8/site-packages/zmq/sugar/socket.py</span> in <span class="ansi-cyan-fg">poll</span><span class="ansi-blue-fg">(self, timeout, flags)</span>
<span class="ansi-green-intense-fg ansi-bold">    791</span>         p <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>_poller_class<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    792</span>         p<span class="ansi-blue-fg">.</span>register<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> flags<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 793</span><span class="ansi-red-fg">         </span>evts <span class="ansi-blue-fg">=</span> dict<span class="ansi-blue-fg">(</span>p<span class="ansi-blue-fg">.</span>poll<span class="ansi-blue-fg">(</span>timeout<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    794</span>         <span class="ansi-red-fg"># return 0 if no events, otherwise return event bitfield</span>
<span class="ansi-green-intense-fg ansi-bold">    795</span>         <span class="ansi-green-fg">return</span> evts<span class="ansi-blue-fg">.</span>get<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> <span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/Code/classes/jlab_3.8/lib/python3.8/site-packages/zmq/sugar/poll.py</span> in <span class="ansi-cyan-fg">poll</span><span class="ansi-blue-fg">(self, timeout)</span>
<span class="ansi-green-intense-fg ansi-bold">    101</span>         <span class="ansi-green-fg">elif</span> isinstance<span class="ansi-blue-fg">(</span>timeout<span class="ansi-blue-fg">,</span> float<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    102</span>             timeout <span class="ansi-blue-fg">=</span> int<span class="ansi-blue-fg">(</span>timeout<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 103</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> zmq_poll<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>sockets<span class="ansi-blue-fg">,</span> timeout<span class="ansi-blue-fg">=</span>timeout<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    104</span> 
<span class="ansi-green-intense-fg ansi-bold">    105</span> 

<span class="ansi-green-fg">zmq/backend/cython/_poll.pyx</span> in <span class="ansi-cyan-fg">zmq.backend.cython._poll.zmq_poll</span><span class="ansi-blue-fg">()</span>

<span class="ansi-green-fg">~/Code/classes/jlab_3.8/lib/python3.8/site-packages/zmq/backend/cython/checkrc.pxd</span> in <span class="ansi-cyan-fg">zmq.backend.cython.checkrc._check_rc</span><span class="ansi-blue-fg">()</span>

<span class="ansi-red-fg">KeyboardInterrupt</span>: </pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

